var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function a(t){t.forEach(e)}function o(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function i(t){t.parentNode&&t.parentNode.removeChild(t)}function s(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function u(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function d(){return f(" ")}function h(t,e,n,a){return t.addEventListener(e,n,a),()=>t.removeEventListener(e,n,a)}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function m(t,e){e=""+e,t.data!==e&&(t.data=e)}function _(t,e){t.value=null==e?"":e}let g;function y(t){g=t}function w(t){(function(){if(!g)throw new Error("Function called outside component initialization");return g})().$$.on_mount.push(t)}const $=[],b=[];let k=[];const A=[],v=Promise.resolve();let E=!1;function R(t){k.push(t)}const x=new Set;let C=0;function O(){if(0!==C)return;const t=g;do{try{for(;C<$.length;){const t=$[C];C++,y(t),j(t.$$)}}catch(t){throw $.length=0,C=0,t}for(y(null),$.length=0,C=0;b.length;)b.pop()();for(let t=0;t<k.length;t+=1){const e=k[t];x.has(e)||(x.add(e),e())}k.length=0}while($.length);for(;A.length;)A.pop()();E=!1,x.clear(),y(t)}function j(t){if(null!==t.fragment){t.update(),a(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(R)}}const S=new Set;function M(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];k.forEach((a=>-1===t.indexOf(a)?e.push(a):n.push(a))),n.forEach((t=>t())),k=e}(n.after_update),a(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function D(t,e){-1===t.$$.dirty[0]&&($.push(t),E||(E=!0,v.then(O)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function N(r,c,l,s,u,f,d,h=[-1]){const p=g;y(r);const m=r.$$={fragment:null,ctx:[],props:f,update:t,not_equal:u,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c.context||(p?p.$$.context:[])),callbacks:n(),dirty:h,skip_bound:!1,root:c.target||p.$$.root};d&&d(m.root);let _=!1;if(m.ctx=l?l(r,c.props||{},((t,e,...n)=>{const a=n.length?n[0]:e;return m.ctx&&u(m.ctx[t],m.ctx[t]=a)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](a),_&&D(r,t)),e})):[],m.update(),_=!0,a(m.before_update),m.fragment=!!s&&s(m.ctx),c.target){if(c.hydrate){const t=function(t){return Array.from(t.childNodes)}(c.target);m.fragment&&m.fragment.l(t),t.forEach(i)}else m.fragment&&m.fragment.c();c.intro&&((w=r.$$.fragment)&&w.i&&(S.delete(w),w.i($))),function(t,n,r,c){const{fragment:l,after_update:i}=t.$$;l&&l.m(n,r),c||R((()=>{const n=t.$$.on_mount.map(e).filter(o);t.$$.on_destroy?t.$$.on_destroy.push(...n):a(n),t.$$.on_mount=[]})),i.forEach(R)}(r,c.target,c.anchor,c.customElement),O()}var w,$;y(p)}class P{$destroy(){M(this,1),this.$destroy=t}$on(e,n){if(!o(n))return t;const a=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return a.push(n),()=>{const t=a.indexOf(n);-1!==t&&a.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function T(t,e,n){const a=t.slice();return a[68]=e[n],a[70]=n,a}function B(t,e,n){const a=t.slice();return a[71]=e[n],a[73]=n,a}function L(t,e,n){const a=t.slice();return a[74]=e[n],a[73]=n,a}function Y(t,e,n){const a=t.slice();return a[68]=e[n],a[70]=n,a}function J(t,e,n){const a=t.slice();return a[68]=e[n],a[70]=n,a}function U(t,e,n){const a=t.slice();return a[78]=e[n],a[73]=n,a}function z(t){let e,n,a,o,r=t[78].tag+"";function s(){return t[33](t[78])}return{c(){e=u("button"),n=f(r)},m(t,r){l(t,e,r),c(e,n),a||(o=h(e,"click",s),a=!0)},p(e,a){t=e,1&a[0]&&r!==(r=t[78].tag+"")&&m(n,r)},d(t){t&&i(e),a=!1,o()}}}function G(t){let e,n;return{c(){e=u("option"),e.__value=n=t[68].tag,e.value=e.__value},m(t,n){l(t,e,n)},p(t,a){256&a[0]&&n!==(n=t[68].tag)&&(e.__value=n,e.value=e.__value)},d(t){t&&i(e)}}}function Q(e){let n;return{c(){n=u("span"),n.textContent="😇"},m(t,e){l(t,n,e)},p:t,d(t){t&&i(n)}}}function q(t){let e,n,r,s,p,_,g,y,w,$,b=t[74].reply+"",k=t[74].username+"";function A(){return t[40](t[74])}return{c(){e=u("li"),n=f(b),r=d(),s=u("button"),p=f(k),_=d(),g=u("button"),g.textContent="fetch_delete_comment_reply",y=d()},m(a,i){l(a,e,i),c(e,n),c(e,r),c(e,s),c(s,p),c(e,_),c(e,g),l(a,y,i),w||($=[h(s,"click",A),h(g,"click",(function(){o(t[19](t[74].id))&&t[19](t[74].id).apply(this,arguments)}))],w=!0)},p(e,a){t=e,1&a[0]&&b!==(b=t[74].reply+"")&&m(n,b),1&a[0]&&k!==(k=t[74].username+"")&&m(p,k)},d(t){t&&i(e),t&&i(y),w=!1,a($)}}}function F(t){let e,n,r,g,y,w,$,b,k,A,v,E,R,x,C,O,j,S=t[71][t[73]].comment+"",M=t[71][t[73]].username+"";function D(){return t[38](t[71],t[73])}let N=t[71].comment_replies,P=[];for(let e=0;e<N.length;e+=1)P[e]=q(L(t,N,e));return{c(){e=u("li"),n=f(S),r=d(),g=u("button"),y=f(M),w=d(),$=u("button"),$.textContent="fetch_delete_comment",b=d(),k=u("input"),A=d(),v=u("button"),v.textContent="fetch_insert_comment_reply",E=d(),R=u("li"),x=u("ul");for(let t=0;t<P.length;t+=1)P[t].c();C=d(),p(k,"type","text"),p(k,"placeholder","comment_reply"),p(R,"class","reply_zone")},m(a,i){l(a,e,i),c(e,n),c(e,r),c(e,g),c(g,y),c(e,w),c(e,$),l(a,b,i),l(a,k,i),_(k,t[6]),l(a,A,i),l(a,v,i),l(a,E,i),l(a,R,i),c(R,x);for(let t=0;t<P.length;t+=1)P[t]&&P[t].m(x,null);l(a,C,i),O||(j=[h(g,"click",D),h($,"click",(function(){o(t[17](t[71][t[73]].id))&&t[17](t[71][t[73]].id).apply(this,arguments)})),h(k,"input",t[39]),h(v,"click",(function(){o(t[18](t[71][t[73]].id))&&t[18](t[71][t[73]].id).apply(this,arguments)}))],O=!0)},p(e,a){if(t=e,1&a[0]&&S!==(S=t[71][t[73]].comment+"")&&m(n,S),1&a[0]&&M!==(M=t[71][t[73]].username+"")&&m(y,M),64&a[0]&&k.value!==t[6]&&_(k,t[6]),34078721&a[0]){let e;for(N=t[71].comment_replies,e=0;e<N.length;e+=1){const n=L(t,N,e);P[e]?P[e].p(n,a):(P[e]=q(n),P[e].c(),P[e].m(x,null))}for(;e<P.length;e+=1)P[e].d(1);P.length=N.length}},d(t){t&&i(e),t&&i(b),t&&i(k),t&&i(A),t&&i(v),t&&i(E),t&&i(R),s(P,t),t&&i(C),O=!1,a(j)}}}function H(t){let e,n,r,g,y,w,$,b,k,A,v,E,R,x,C,O,j,S,M,D,N,P,T,L,q,H,I,K,V,W,X,Z,tt,et,nt,at,ot,rt,ct,lt,it,st=JSON.parse(t[68].data_json_str).data1+"",ut=JSON.parse(t[68].data_json_str).data2+"",ft=t[68].username+"",dt=t[68].tags,ht=[];for(let e=0;e<dt.length;e+=1)ht[e]=z(U(t,dt,e));let pt=t[8],mt=[];for(let e=0;e<pt.length;e+=1)mt[e]=G(J(t,pt,e));function _t(){return t[36](t[68])}let gt=t[68].likes,yt=[];for(let e=0;e<gt.length;e+=1)yt[e]=Q(Y(t,gt,e));let wt=t[68].comments_and_replies,$t=[];for(let e=0;e<wt.length;e+=1)$t[e]=F(B(t,wt,e));return{c(){e=u("br"),n=d(),r=u("br"),g=d(),y=u("li"),w=u("div");for(let t=0;t<ht.length;t+=1)ht[t].c();$=d(),b=u("div"),k=u("input"),A=d(),v=u("datalist");for(let t=0;t<mt.length;t+=1)mt[t].c();E=d(),R=u("button"),R.textContent="fetch_insert_tag",x=d(),C=u("ul"),O=u("li"),j=u("span"),S=f("data1: "),M=f(st),D=d(),N=u("span"),P=f("data2: "),T=f(ut),L=d(),q=u("button"),q.textContent="fetch_delete_link",H=d(),I=u("button"),K=f(ft),V=d();for(let t=0;t<yt.length;t+=1)yt[t].c();W=d(),X=u("button"),X.textContent="like_increment_or_decrement",Z=d(),tt=u("div"),et=u("input"),nt=d(),at=u("button"),at.textContent="fetch_insert_comment",ot=d(),rt=u("ul");for(let t=0;t<$t.length;t+=1)$t[t].c();ct=d(),p(k,"list","autocomplete_list"),p(k,"type","text"),p(k,"name",""),p(k,"id","hoge"),p(k,"placeholder","tag"),p(v,"id","autocomplete_list"),p(et,"type","text"),p(et,"name",""),p(et,"id",""),p(et,"placeholder","comment"),p(rt,"class","comment_zone")},m(a,i){l(a,e,i),l(a,n,i),l(a,r,i),l(a,g,i),l(a,y,i),c(y,w);for(let t=0;t<ht.length;t+=1)ht[t]&&ht[t].m(w,null);c(y,$),c(y,b),c(b,k),t[34](k),_(k,t[7]),c(b,A),c(b,v);for(let t=0;t<mt.length;t+=1)mt[t]&&mt[t].m(v,null);c(b,E),c(b,R),c(y,x),c(y,C),c(C,O),c(O,j),c(j,S),c(j,M),c(O,D),c(O,N),c(N,P),c(N,T),c(O,L),c(O,q),c(y,H),c(y,I),c(I,K),c(y,V);for(let t=0;t<yt.length;t+=1)yt[t]&&yt[t].m(y,null);c(y,W),c(y,X),c(y,Z),c(y,tt),c(tt,et),_(et,t[5]),c(tt,nt),c(tt,at),c(y,ot),c(y,rt);for(let t=0;t<$t.length;t+=1)$t[t]&&$t[t].m(rt,null);c(y,ct),lt||(it=[h(k,"input",t[35]),h(k,"input",t[21]),h(R,"click",(function(){o(t[20](t[68].id))&&t[20](t[68].id).apply(this,arguments)})),h(q,"click",(function(){o(t[14](t[68].id))&&t[14](t[68].id).apply(this,arguments)})),h(I,"click",_t),h(X,"click",(function(){o(t[15](t[68].id))&&t[15](t[68].id).apply(this,arguments)})),h(et,"input",t[37]),h(at,"click",(function(){o(t[16](t[68].id))&&t[16](t[68].id).apply(this,arguments)}))],lt=!0)},p(e,n){if(t=e,16777217&n[0]){let e;for(dt=t[68].tags,e=0;e<dt.length;e+=1){const a=U(t,dt,e);ht[e]?ht[e].p(a,n):(ht[e]=z(a),ht[e].c(),ht[e].m(w,null))}for(;e<ht.length;e+=1)ht[e].d(1);ht.length=dt.length}if(128&n[0]&&k.value!==t[7]&&_(k,t[7]),256&n[0]){let e;for(pt=t[8],e=0;e<pt.length;e+=1){const a=J(t,pt,e);mt[e]?mt[e].p(a,n):(mt[e]=G(a),mt[e].c(),mt[e].m(v,null))}for(;e<mt.length;e+=1)mt[e].d(1);mt.length=pt.length}if(1&n[0]&&st!==(st=JSON.parse(t[68].data_json_str).data1+"")&&m(M,st),1&n[0]&&ut!==(ut=JSON.parse(t[68].data_json_str).data2+"")&&m(T,ut),1&n[0]&&ft!==(ft=t[68].username+"")&&m(K,ft),1&n[0]){let e;for(gt=t[68].likes,e=0;e<gt.length;e+=1){const a=Y(t,gt,e);yt[e]?yt[e].p(a,n):(yt[e]=Q(),yt[e].c(),yt[e].m(y,W))}for(;e<yt.length;e+=1)yt[e].d(1);yt.length=gt.length}if(32&n[0]&&et.value!==t[5]&&_(et,t[5]),34472001&n[0]){let e;for(wt=t[68].comments_and_replies,e=0;e<wt.length;e+=1){const a=B(t,wt,e);$t[e]?$t[e].p(a,n):($t[e]=F(a),$t[e].c(),$t[e].m(rt,null))}for(;e<$t.length;e+=1)$t[e].d(1);$t.length=wt.length}},d(o){o&&i(e),o&&i(n),o&&i(r),o&&i(g),o&&i(y),s(ht,o),t[34](null),s(mt,o),s(yt,o),s($t,o),lt=!1,a(it)}}}function I(e){let n,o,r,g,y,w,$,b,k,A,v,E,R,x,C,O,j,S,M,D,N,P,B,L,Y,J,U,z,G=e[0],Q=[];for(let t=0;t<G.length;t+=1)Q[t]=H(T(e,G,t));return{c(){n=f("name: "),o=u("input"),r=f("\npassword: "),g=u("input"),y=d(),w=u("div"),$=f("DATA1:\n\t"),b=u("textarea"),k=f("\n\tDATA2:\n\t"),A=u("textarea"),v=d(),E=u("button"),E.textContent="insert_link",R=d(),x=u("button"),x.textContent="CLEAR",C=d(),O=u("button"),j=f("ORDER_BY: "),S=f(e[10]),M=d(),D=u("button"),N=f("ORDER_BY_COLUMN: "),P=f(e[11]),B=d(),L=u("ul");for(let t=0;t<Q.length;t+=1)Q[t].c();Y=d(),J=u("main"),J.innerHTML='<a href="https://taroyanaka.github.io/svelte2/">this site is https://taroyanaka.github.io/svelte2/</a>',p(o,"type","text"),p(o,"placeholder","name"),p(g,"type","password"),p(g,"placeholder","password"),p(b,"placeholder","DATA1"),p(b,"class","link"),p(A,"placeholder","DATA2"),p(A,"class","link"),p(E,"class","insert_link")},m(t,a){l(t,n,a),l(t,o,a),_(o,e[1]),l(t,r,a),l(t,g,a),_(g,e[2]),l(t,y,a),l(t,w,a),c(w,$),c(w,b),_(b,e[3]),c(w,k),c(w,A),_(A,e[4]),c(w,v),c(w,E),c(w,R),c(w,x),c(w,C),c(w,O),c(O,j),c(O,S),c(w,M),c(w,D),c(D,N),c(D,P),l(t,B,a),l(t,L,a);for(let t=0;t<Q.length;t+=1)Q[t]&&Q[t].m(L,null);l(t,Y,a),l(t,J,a),U||(z=[h(o,"input",e[26]),h(g,"input",e[27]),h(b,"input",e[28]),h(A,"input",e[29]),h(E,"click",e[13]),h(x,"click",e[30]),h(O,"click",e[31]),h(D,"click",e[32])],U=!0)},p(t,e){if(2&e[0]&&o.value!==t[1]&&_(o,t[1]),4&e[0]&&g.value!==t[2]&&_(g,t[2]),8&e[0]&&_(b,t[3]),16&e[0]&&_(A,t[4]),1024&e[0]&&m(S,t[10]),2048&e[0]&&m(P,t[11]),54510561&e[0]){let n;for(G=t[0],n=0;n<G.length;n+=1){const a=T(t,G,n);Q[n]?Q[n].p(a,e):(Q[n]=H(a),Q[n].c(),Q[n].m(L,null))}for(;n<Q.length;n+=1)Q[n].d(1);Q.length=G.length}},i:t,o:t,d(t){t&&i(n),t&&i(o),t&&i(r),t&&i(g),t&&i(y),t&&i(w),t&&i(B),t&&i(L),s(Q,t),t&&i(Y),t&&i(J),U=!1,a(z)}}}const K="http://localhost:8000/";function V(t,e,n){let a,o=[],r="user1",c="user_pass1",l="data1",i="data2",s="comment1",u="reply1",f="tag1",d=[],h="",p="ASC",m="id",_="",g="",y="";const $=async({ORDER_BY_PARAM:t="DESC",ORDER_BY_COLUMN_PARAM:e="id",REQ_TAG_PARAM:a,USER_PARAM:r})=>{console.log(e);try{n(10,p=t),n(11,m=e),_=a,g=r;const c=()=>{const t=[];p&&t.push(`order_by=${p}`),m&&t.push(`order_by_column=${m}`),_&&t.push(`tag=${_}`),g&&t.push(`user=${g}`);return`${K+"read_all"}?${t.join("&")}`},l=await(await fetch(c())).json();if("fail"===l.result)throw new Error(l.error);const i=await(await fetch(c())).json();if(0===i.length)throw new Error("条件に一致するデータがありませんでした");n(0,o=i.message)}catch(t){console.log(t),t.message}},k=t=>({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),A=async t=>{try{200===t.status&&(y=t.result),"fail"===t.result||400===t.status?(()=>{throw new Error(t.message)})():await $({})}catch(t){(()=>{throw new Error(t.message)})()}},v=async()=>{const t=await(await fetch(K+"get_tags_for_autocomplete",k({name:r,password:c}))).json(),e=await t;n(8,d=await e.message)},E=async()=>{switch(!0){case"id"===m:n(11,m="created_at");break;case"created_at"===m:n(11,m="updated_at");break;default:n(11,m="id")}await $({ORDER_BY_PARAM:p,ORDER_BY_COLUMN_PARAM:m,REQ_TAG_PARAM:"TEST"})},R=async()=>{switch(!0){case"ASC"===p:n(10,p="DESC");break;case"DESC"===p:n(10,p="ASC");break;default:n(11,m="DESC")}await $({ORDER_BY_PARAM:p,ORDER_BY_COLUMN_PARAM:m})},x=async t=>{_=t,await $({REQ_TAG_PARAM:_})},C=async t=>{const e=t||"user1";await $({USER_PARAM:e})};w((async()=>{try{await $({}),await v()}catch(t){console.log(t)}}));return[o,r,c,l,i,s,u,f,d,h,p,m,$,async()=>{try{const t=JSON.stringify({data1:l,data2:i});a=await(await fetch(K+"insert_link",k({name:r,password:c,data_json_str:t}))).json(),await A(a)}catch(t){t.message}},async t=>{try{a=await(await fetch(K+"delete_link",k({name:r,password:c,id:t}))).json(),await A(a)}catch(t){t.message}},async t=>{try{a=await(await fetch(K+"like_increment_or_decrement",k({name:r,password:c,link_id:t}))).json(),await A(a)}catch(t){t.message}},async t=>{try{a=await(await fetch(K+"insert_comment",k({name:r,password:c,link_id:t,comment:s}))).json(),await A(a)}catch(t){t.message}},async t=>{try{a=await(await fetch(K+"delete_comment",k({name:r,password:c,comment_id:t}))).json(),await A(a)}catch(t){t.message}},async t=>{try{a=await(await fetch(K+"insert_comment_reply",k({name:r,password:c,comment_id:t,comment_reply:u}))).json(),await A(a)}catch(t){t.message}},async t=>{try{a=await(await fetch(K+"delete_comment_reply",k({name:r,password:c,comment_reply_id:t}))).json(),await A(a)}catch(t){t.message}},async(t,e)=>{try{n(7,f=e||h.value),a=await(await fetch(K+"insert_tag",k({name:r,password:c,link_id:t,tag:f}))).json(),await A(a)}catch(t){t.message}},v,E,R,x,C,function(){r=this.value,n(1,r)},function(){c=this.value,n(2,c)},function(){l=this.value,n(3,l)},function(){i=this.value,n(4,i)},()=>$({}),()=>R(),()=>E(),t=>x(t.tag),function(t){b[t?"unshift":"push"]((()=>{h=t,n(9,h)}))},function(){f=this.value,n(7,f)},t=>C(t.username),function(){s=this.value,n(5,s)},(t,e)=>C(t[e].username),function(){u=this.value,n(6,u)},t=>C(t.username)]}return new class extends P{constructor(t){super(),N(this,t,V,I,r,{},null,[-1,-1,-1])}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
