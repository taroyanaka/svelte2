var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function a(t){t.forEach(e)}function o(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,e){t.appendChild(e)}function s(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode&&t.parentNode.removeChild(t)}function i(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function u(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function d(){return f(" ")}function h(t,e,n,a){return t.addEventListener(e,n,a),()=>t.removeEventListener(e,n,a)}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function m(t,e){e=""+e,t.data!==e&&(t.data=e)}function _(t,e){t.value=null==e?"":e}let g;function y(t){g=t}function w(){if(!g)throw new Error("Function called outside component initialization");return g}const $=[],b=[];let k=[];const A=[],v=Promise.resolve();let E=!1;function R(t){k.push(t)}const x=new Set;let O=0;function j(){if(0!==O)return;const t=g;do{try{for(;O<$.length;){const t=$[O];O++,y(t),C(t.$$)}}catch(t){throw $.length=0,O=0,t}for(y(null),$.length=0,O=0;b.length;)b.pop()();for(let t=0;t<k.length;t+=1){const e=k[t];x.has(e)||(x.add(e),e())}k.length=0}while($.length);for(;A.length;)A.pop()();E=!1,x.clear(),y(t)}function C(t){if(null!==t.fragment){t.update(),a(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(R)}}const S=new Set;function N(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];k.forEach((a=>-1===t.indexOf(a)?e.push(a):n.push(a))),n.forEach((t=>t())),k=e}(n.after_update),a(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function M(t,e){-1===t.$$.dirty[0]&&($.push(t),E||(E=!0,v.then(j)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function D(r,c,s,i,u,f,d,h=[-1]){const p=g;y(r);const m=r.$$={fragment:null,ctx:[],props:f,update:t,not_equal:u,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c.context||(p?p.$$.context:[])),callbacks:n(),dirty:h,skip_bound:!1,root:c.target||p.$$.root};d&&d(m.root);let _=!1;if(m.ctx=s?s(r,c.props||{},((t,e,...n)=>{const a=n.length?n[0]:e;return m.ctx&&u(m.ctx[t],m.ctx[t]=a)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](a),_&&M(r,t)),e})):[],m.update(),_=!0,a(m.before_update),m.fragment=!!i&&i(m.ctx),c.target){if(c.hydrate){const t=function(t){return Array.from(t.childNodes)}(c.target);m.fragment&&m.fragment.l(t),t.forEach(l)}else m.fragment&&m.fragment.c();c.intro&&((w=r.$$.fragment)&&w.i&&(S.delete(w),w.i($))),function(t,n,r,c){const{fragment:s,after_update:l}=t.$$;s&&s.m(n,r),c||R((()=>{const n=t.$$.on_mount.map(e).filter(o);t.$$.on_destroy?t.$$.on_destroy.push(...n):a(n),t.$$.on_mount=[]})),l.forEach(R)}(r,c.target,c.anchor,c.customElement),j()}var w,$;y(p)}class P{$destroy(){N(this,1),this.$destroy=t}$on(e,n){if(!o(n))return t;const a=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return a.push(n),()=>{const t=a.indexOf(n);-1!==t&&a.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function T(t,e,n){const a=t.slice();return a[69]=e[n],a[71]=n,a}function J(t,e,n){const a=t.slice();return a[72]=e[n],a[74]=n,a}function B(t,e,n){const a=t.slice();return a[75]=e[n],a[74]=n,a}function L(t,e,n){const a=t.slice();return a[69]=e[n],a[71]=n,a}function Y(t,e,n){const a=t.slice();return a[69]=e[n],a[71]=n,a}function U(t,e,n){const a=t.slice();return a[79]=e[n],a[74]=n,a}function z(t){let e,n,a,o,r=t[79].tag+"";function i(){return t[34](t[79])}return{c(){e=u("button"),n=f(r)},m(t,r){s(t,e,r),c(e,n),a||(o=h(e,"click",i),a=!0)},p(e,a){t=e,1&a[0]&&r!==(r=t[79].tag+"")&&m(n,r)},d(t){t&&l(e),a=!1,o()}}}function G(t){let e,n;return{c(){e=u("option"),e.__value=n=t[69].tag,e.value=e.__value},m(t,n){s(t,e,n)},p(t,a){256&a[0]&&n!==(n=t[69].tag)&&(e.__value=n,e.value=e.__value)},d(t){t&&l(e)}}}function Q(t){let e,n,a;return{c(){e=u("button"),e.textContent="fetch_copy_insert_link"},m(r,c){s(r,e,c),n||(a=h(e,"click",(function(){o(t[14](JSON.parse(t[69].data_json_str).data1,JSON.parse(t[69].data_json_str).data2))&&t[14](JSON.parse(t[69].data_json_str).data1,JSON.parse(t[69].data_json_str).data2).apply(this,arguments)})),n=!0)},p(e,n){t=e},d(t){t&&l(e),n=!1,a()}}}function q(e){let n;return{c(){n=u("span"),n.textContent="😇"},m(t,e){s(t,n,e)},p:t,d(t){t&&l(n)}}}function F(t){let e,n,r,i,p,_,g,y,w,$,b=t[75].reply+"",k=t[75].username+"";function A(){return t[41](t[75])}return{c(){e=u("li"),n=f(b),r=d(),i=u("button"),p=f(k),_=d(),g=u("button"),g.textContent="fetch_delete_comment_reply",y=d()},m(a,l){s(a,e,l),c(e,n),c(e,r),c(e,i),c(i,p),c(e,_),c(e,g),s(a,y,l),w||($=[h(i,"click",A),h(g,"click",(function(){o(t[20](t[75].id))&&t[20](t[75].id).apply(this,arguments)}))],w=!0)},p(e,a){t=e,1&a[0]&&b!==(b=t[75].reply+"")&&m(n,b),1&a[0]&&k!==(k=t[75].username+"")&&m(p,k)},d(t){t&&l(e),t&&l(y),w=!1,a($)}}}function H(t){let e,n,r,g,y,w,$,b,k,A,v,E,R,x,O,j,C,S=t[72][t[74]].comment+"",N=t[72][t[74]].username+"";function M(){return t[39](t[72],t[74])}let D=t[72].comment_replies,P=[];for(let e=0;e<D.length;e+=1)P[e]=F(B(t,D,e));return{c(){e=u("li"),n=f(S),r=d(),g=u("button"),y=f(N),w=d(),$=u("button"),$.textContent="fetch_delete_comment",b=d(),k=u("input"),A=d(),v=u("button"),v.textContent="fetch_insert_comment_reply",E=d(),R=u("li"),x=u("ul");for(let t=0;t<P.length;t+=1)P[t].c();O=d(),p(k,"type","text"),p(k,"placeholder","comment_reply"),p(R,"class","reply_zone")},m(a,l){s(a,e,l),c(e,n),c(e,r),c(e,g),c(g,y),c(e,w),c(e,$),s(a,b,l),s(a,k,l),_(k,t[6]),s(a,A,l),s(a,v,l),s(a,E,l),s(a,R,l),c(R,x);for(let t=0;t<P.length;t+=1)P[t]&&P[t].m(x,null);s(a,O,l),j||(C=[h(g,"click",M),h($,"click",(function(){o(t[18](t[72][t[74]].id))&&t[18](t[72][t[74]].id).apply(this,arguments)})),h(k,"input",t[40]),h(v,"click",(function(){o(t[19](t[72][t[74]].id))&&t[19](t[72][t[74]].id).apply(this,arguments)}))],j=!0)},p(e,a){if(t=e,1&a[0]&&S!==(S=t[72][t[74]].comment+"")&&m(n,S),1&a[0]&&N!==(N=t[72][t[74]].username+"")&&m(y,N),64&a[0]&&k.value!==t[6]&&_(k,t[6]),68157441&a[0]){let e;for(D=t[72].comment_replies,e=0;e<D.length;e+=1){const n=B(t,D,e);P[e]?P[e].p(n,a):(P[e]=F(n),P[e].c(),P[e].m(x,null))}for(;e<P.length;e+=1)P[e].d(1);P.length=D.length}},d(t){t&&l(e),t&&l(b),t&&l(k),t&&l(A),t&&l(v),t&&l(E),t&&l(R),i(P,t),t&&l(O),j=!1,a(C)}}}function I(t){let e,n,r,g,y,w,$,b,k,A,v,E,R,x,O,j,C,S,N,M,D,P,T,B,F,I,K,V,W,X,Z,tt,et,nt,at,ot,rt,ct,st,lt,it,ut,ft=JSON.parse(t[69].data_json_str).data1+"",dt=JSON.parse(t[69].data_json_str).data2+"",ht=t[69].username+"",pt=t[69].tags,mt=[];for(let e=0;e<pt.length;e+=1)mt[e]=z(U(t,pt,e));let _t=t[8],gt=[];for(let e=0;e<_t.length;e+=1)gt[e]=G(Y(t,_t,e));let yt=t[69].username!==t[1]&&Q(t);function wt(){return t[37](t[69])}let $t=t[69].likes,bt=[];for(let e=0;e<$t.length;e+=1)bt[e]=q(L(t,$t,e));let kt=t[69].comments_and_replies,At=[];for(let e=0;e<kt.length;e+=1)At[e]=H(J(t,kt,e));return{c(){e=u("br"),n=d(),r=u("br"),g=d(),y=u("li"),w=u("div");for(let t=0;t<mt.length;t+=1)mt[t].c();$=d(),b=u("div"),k=u("input"),A=d(),v=u("datalist");for(let t=0;t<gt.length;t+=1)gt[t].c();E=d(),R=u("button"),R.textContent="fetch_insert_tag",x=d(),O=u("ul"),j=u("li"),C=u("span"),S=f("data1: "),N=f(ft),M=d(),D=u("span"),P=f("data2: "),T=f(dt),B=d(),F=u("button"),F.textContent="fetch_delete_link",I=d(),yt&&yt.c(),K=d(),V=u("button"),W=f(ht),X=d();for(let t=0;t<bt.length;t+=1)bt[t].c();Z=d(),tt=u("button"),tt.textContent="like_increment_or_decrement",et=d(),nt=u("div"),at=u("input"),ot=d(),rt=u("button"),rt.textContent="fetch_insert_comment",ct=d(),st=u("ul");for(let t=0;t<At.length;t+=1)At[t].c();lt=d(),p(k,"list","autocomplete_list"),p(k,"type","text"),p(k,"name",""),p(k,"id","hoge"),p(k,"placeholder","tag"),p(v,"id","autocomplete_list"),p(at,"type","text"),p(at,"name",""),p(at,"id",""),p(at,"placeholder","comment"),p(st,"class","comment_zone")},m(a,l){s(a,e,l),s(a,n,l),s(a,r,l),s(a,g,l),s(a,y,l),c(y,w);for(let t=0;t<mt.length;t+=1)mt[t]&&mt[t].m(w,null);c(y,$),c(y,b),c(b,k),t[35](k),_(k,t[7]),c(b,A),c(b,v);for(let t=0;t<gt.length;t+=1)gt[t]&&gt[t].m(v,null);c(b,E),c(b,R),c(y,x),c(y,O),c(O,j),c(j,C),c(C,S),c(C,N),c(j,M),c(j,D),c(D,P),c(D,T),c(j,B),c(j,F),c(j,I),yt&&yt.m(j,null),c(y,K),c(y,V),c(V,W),c(y,X);for(let t=0;t<bt.length;t+=1)bt[t]&&bt[t].m(y,null);c(y,Z),c(y,tt),c(y,et),c(y,nt),c(nt,at),_(at,t[5]),c(nt,ot),c(nt,rt),c(y,ct),c(y,st);for(let t=0;t<At.length;t+=1)At[t]&&At[t].m(st,null);c(y,lt),it||(ut=[h(k,"input",t[36]),h(k,"input",t[22]),h(R,"click",(function(){o(t[21](t[69].id))&&t[21](t[69].id).apply(this,arguments)})),h(F,"click",(function(){o(t[15](t[69].id))&&t[15](t[69].id).apply(this,arguments)})),h(V,"click",wt),h(tt,"click",(function(){o(t[16](t[69].id))&&t[16](t[69].id).apply(this,arguments)})),h(at,"input",t[38]),h(rt,"click",(function(){o(t[17](t[69].id))&&t[17](t[69].id).apply(this,arguments)}))],it=!0)},p(e,n){if(t=e,33554433&n[0]){let e;for(pt=t[69].tags,e=0;e<pt.length;e+=1){const a=U(t,pt,e);mt[e]?mt[e].p(a,n):(mt[e]=z(a),mt[e].c(),mt[e].m(w,null))}for(;e<mt.length;e+=1)mt[e].d(1);mt.length=pt.length}if(128&n[0]&&k.value!==t[7]&&_(k,t[7]),256&n[0]){let e;for(_t=t[8],e=0;e<_t.length;e+=1){const a=Y(t,_t,e);gt[e]?gt[e].p(a,n):(gt[e]=G(a),gt[e].c(),gt[e].m(v,null))}for(;e<gt.length;e+=1)gt[e].d(1);gt.length=_t.length}if(1&n[0]&&ft!==(ft=JSON.parse(t[69].data_json_str).data1+"")&&m(N,ft),1&n[0]&&dt!==(dt=JSON.parse(t[69].data_json_str).data2+"")&&m(T,dt),t[69].username!==t[1]?yt?yt.p(t,n):(yt=Q(t),yt.c(),yt.m(j,null)):yt&&(yt.d(1),yt=null),1&n[0]&&ht!==(ht=t[69].username+"")&&m(W,ht),1&n[0]){let e;for($t=t[69].likes,e=0;e<$t.length;e+=1){const a=L(t,$t,e);bt[e]?bt[e].p(a,n):(bt[e]=q(),bt[e].c(),bt[e].m(y,Z))}for(;e<bt.length;e+=1)bt[e].d(1);bt.length=$t.length}if(32&n[0]&&at.value!==t[5]&&_(at,t[5]),68943937&n[0]){let e;for(kt=t[69].comments_and_replies,e=0;e<kt.length;e+=1){const a=J(t,kt,e);At[e]?At[e].p(a,n):(At[e]=H(a),At[e].c(),At[e].m(st,null))}for(;e<At.length;e+=1)At[e].d(1);At.length=kt.length}},d(o){o&&l(e),o&&l(n),o&&l(r),o&&l(g),o&&l(y),i(mt,o),t[35](null),i(gt,o),yt&&yt.d(),i(bt,o),i(At,o),it=!1,a(ut)}}}function K(e){let n,o,r,g,y,w,$,b,k,A,v,E,R,x,O,j,C,S,N,M,D,P,J,B,L,Y,U,z,G=e[0],Q=[];for(let t=0;t<G.length;t+=1)Q[t]=I(T(e,G,t));return{c(){n=f("name: "),o=u("input"),r=f("\npassword: "),g=u("input"),y=d(),w=u("div"),$=f("DATA1:\n\t"),b=u("textarea"),k=f("\n\tDATA2:\n\t"),A=u("textarea"),v=d(),E=u("button"),E.textContent="insert_link",R=d(),x=u("button"),x.textContent="CLEAR",O=d(),j=u("button"),C=f("ORDER_BY: "),S=f(e[10]),N=d(),M=u("button"),D=f("ORDER_BY_COLUMN: "),P=f(e[11]),J=d(),B=u("ul");for(let t=0;t<Q.length;t+=1)Q[t].c();L=d(),Y=u("main"),Y.innerHTML='<a href="https://taroyanaka.github.io/svelte2/">this site is https://taroyanaka.github.io/svelte2/</a>',p(o,"type","text"),p(o,"placeholder","name"),p(g,"type","password"),p(g,"placeholder","password"),p(b,"placeholder","DATA1"),p(b,"class","link"),p(A,"placeholder","DATA2"),p(A,"class","link"),p(E,"class","insert_link")},m(t,a){s(t,n,a),s(t,o,a),_(o,e[1]),s(t,r,a),s(t,g,a),_(g,e[2]),s(t,y,a),s(t,w,a),c(w,$),c(w,b),_(b,e[3]),c(w,k),c(w,A),_(A,e[4]),c(w,v),c(w,E),c(w,R),c(w,x),c(w,O),c(w,j),c(j,C),c(j,S),c(w,N),c(w,M),c(M,D),c(M,P),s(t,J,a),s(t,B,a);for(let t=0;t<Q.length;t+=1)Q[t]&&Q[t].m(B,null);s(t,L,a),s(t,Y,a),U||(z=[h(o,"input",e[27]),h(g,"input",e[28]),h(b,"input",e[29]),h(A,"input",e[30]),h(E,"click",e[13]),h(x,"click",e[31]),h(j,"click",e[32]),h(M,"click",e[33])],U=!0)},p(t,e){if(2&e[0]&&o.value!==t[1]&&_(o,t[1]),4&e[0]&&g.value!==t[2]&&_(g,t[2]),8&e[0]&&_(b,t[3]),16&e[0]&&_(A,t[4]),1024&e[0]&&m(S,t[10]),2048&e[0]&&m(P,t[11]),109036515&e[0]){let n;for(G=t[0],n=0;n<G.length;n+=1){const a=T(t,G,n);Q[n]?Q[n].p(a,e):(Q[n]=I(a),Q[n].c(),Q[n].m(B,null))}for(;n<Q.length;n+=1)Q[n].d(1);Q.length=G.length}},i:t,o:t,d(t){t&&l(n),t&&l(o),t&&l(r),t&&l(g),t&&l(y),t&&l(w),t&&l(J),t&&l(B),i(Q,t),t&&l(L),t&&l(Y),U=!1,a(z)}}}const V="http://localhost:8000/";function W(t,e,n){let a,o=[],r="user1",c="user_pass1",s="data1",l="data2",i="comment1",u="reply1",f="tag1",d=[],h="",p="ASC",m="id",_="",g="",y="";const $=async({ORDER_BY_PARAM:t="DESC",ORDER_BY_COLUMN_PARAM:e="id",REQ_TAG_PARAM:a,USER_PARAM:r})=>{console.log(e);try{n(10,p=t),n(11,m=e),_=a,g=r;const c=()=>{const t=[];p&&t.push(`order_by=${p}`),m&&t.push(`order_by_column=${m}`),_&&t.push(`tag=${_}`),g&&t.push(`user=${g}`);return`${V+"read_all"}?${t.join("&")}`},s=await(await fetch(c())).json();if("fail"===s.result)throw new Error(s.error);const l=await(await fetch(c())).json();if(0===l.length)throw new Error("条件に一致するデータがありませんでした");n(0,o=l.message)}catch(t){console.log(t),t.message}},k=t=>({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),A=async t=>{try{200===t.status&&(y=t.result),"fail"===t.result||400===t.status?(()=>{throw new Error(t.message)})():await $({})}catch(t){(()=>{throw new Error(t.message)})()}},v=async()=>{const t=await(await fetch(V+"get_tags_for_autocomplete",k({name:r,password:c}))).json(),e=await t;n(8,d=await e.message)},E=async()=>{switch(!0){case"id"===m:n(11,m="created_at");break;case"created_at"===m:n(11,m="updated_at");break;default:n(11,m="id")}await $({ORDER_BY_PARAM:p,ORDER_BY_COLUMN_PARAM:m,REQ_TAG_PARAM:"TEST"})},R=async()=>{switch(!0){case"ASC"===p:n(10,p="DESC");break;case"DESC"===p:n(10,p="ASC");break;default:n(11,m="DESC")}await $({ORDER_BY_PARAM:p,ORDER_BY_COLUMN_PARAM:m})},x=async t=>{_=t,await $({REQ_TAG_PARAM:_})},O=async t=>{const e=t||"user1";await $({USER_PARAM:e})};var j;j=async()=>{try{await $({}),await v()}catch(t){console.log(t)}},w().$$.on_mount.push(j),function(t){w().$$.after_update.push(t)}((async()=>{try{await $({})}catch(t){console.log(t)}}));return[o,r,c,s,l,i,u,f,d,h,p,m,$,async()=>{try{const t=JSON.stringify({data1:s,data2:l});a=await(await fetch(V+"insert_link",k({name:r,password:c,data_json_str:t}))).json(),await A(a)}catch(t){t.message}},async(t,e)=>{try{const n=JSON.stringify({data1:t,data2:e});a=await(await fetch(V+"insert_link",k({name:r,password:c,data_json_str:n}))).json(),await A(a)}catch(t){t.message}},async t=>{try{a=await(await fetch(V+"delete_link",k({name:r,password:c,id:t}))).json(),await A(a)}catch(t){t.message}},async t=>{try{a=await(await fetch(V+"like_increment_or_decrement",k({name:r,password:c,link_id:t}))).json(),await A(a)}catch(t){t.message}},async t=>{try{a=await(await fetch(V+"insert_comment",k({name:r,password:c,link_id:t,comment:i}))).json(),await A(a)}catch(t){t.message}},async t=>{try{a=await(await fetch(V+"delete_comment",k({name:r,password:c,comment_id:t}))).json(),await A(a)}catch(t){t.message}},async t=>{try{a=await(await fetch(V+"insert_comment_reply",k({name:r,password:c,comment_id:t,comment_reply:u}))).json(),await A(a)}catch(t){t.message}},async t=>{try{a=await(await fetch(V+"delete_comment_reply",k({name:r,password:c,comment_reply_id:t}))).json(),await A(a)}catch(t){t.message}},async(t,e)=>{try{n(7,f=e||h.value),a=await(await fetch(V+"insert_tag",k({name:r,password:c,link_id:t,tag:f}))).json(),await A(a)}catch(t){t.message}},v,E,R,x,O,function(){r=this.value,n(1,r)},function(){c=this.value,n(2,c)},function(){s=this.value,n(3,s)},function(){l=this.value,n(4,l)},()=>$({}),()=>R(),()=>E(),t=>x(t.tag),function(t){b[t?"unshift":"push"]((()=>{h=t,n(9,h)}))},function(){f=this.value,n(7,f)},t=>O(t.username),function(){i=this.value,n(5,i)},(t,e)=>O(t[e].username),function(){u=this.value,n(6,u)},t=>O(t.username)]}return new class extends P{constructor(t){super(),D(this,t,W,K,r,{},null,[-1,-1,-1])}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
